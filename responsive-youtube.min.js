/* Responsive-Youtube.js 0.1.0 | Copyright (c) 2017 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(t,e,n){"use strict";function r(t){if(t&&e.contains(t)&&a(t,"ry-ignore")!==!0){var n=a(t,"ry-width")||t.clientWidth,r=a(t,"ry-height")||t.clientHeight;t.setAttribute("data-ry-width",n),t.setAttribute("data-ry-height",r),t.width="100%",n!=r?t.height=t.clientWidth/(n/r):t.height=t.clientWidth}}function o(t,n,o){o&&"object"==typeof o||(o={}),h(A,o);var i=new YT.Player(t,{videoId:n,playerVars:o,events:{onReady:function(n){var o=e.getElementById(t);r(o),y("ready",n,i)},onStateChange:function(t){y("state",t,i)},onPlaybackQualityChange:function(t){y("quality",t,i)},onPlaybackRateChange:function(t){y("rate",t,i)},onError:function(t){y("error",t,i)},onApiChange:function(t){y("api",t,i)}}});g.push(i),y("create",i)}function i(t){for(var e,n=t.attributes,r={},o=n.length-1;o>=0;o--){var i=n[o].nodeName;0===i.indexOf("data-ry-")&&(e=i.replace(/^data-ry-/,""),-1===I.indexOf(","+e+",")&&(r[e]=a(t,i.substr(5))))}return r}function a(t,e){var n,r=t.getAttribute("data-"+e);if("true"===r||"false"===r)return"true"===r;if(!isNaN(r))return parseFloat(r);if(/^\[[\s\S]+\]$|^\{[^:]+[:][\s\S]+\}$/.test(r))try{n=JSON.parse(r)}catch(o){}return n||r}function c(t){if(!w){for(var e=t.addedNodes,n=[],r=[],o=e.length-1;o>=0;o--)e[o].matches(N)?n.push(e[o]):r.push(e[o]);s(n),u(n)}}function f(){b||(b=!0,t.addEventListener("resize",function(){if(g.length)for(var t=0,e=g.length;e>t;t++)r(g[t].getIframe())}),new MutationObserver(function(t){t.forEach(c)}).observe(e.body,{childList:!0}),y("done"))}function u(t){for(var e=0,n=t.length;n>e;e++)s(t[e].querySelectorAll(N))}function s(t){for(var e=0,n=t.length;n>e;e++){var r=t[e];r.id||(p++,r.id="responsive-youtube-"+p),o(r.id,a(r,"ry-video"),i(r))}}function h(t,e){for(var n in t)/^(object|function)$/i.test(typeof t[n])||(e[n]=t[n])}function l(n){if("object"==typeof n?h(n,A):A={},w=!1,t.onYouTubeIframeAPIReady=function(){s(e.querySelectorAll(N)),f()},!m){m=!0;var r=e.createElement("script");r.ansyc=!0,r.src="https://www.youtube.com/iframe_api";var o=e.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o)}}function d(){w=!0,A={};for(var t=g.length-1;t>=0;t--)g[t].destroy();g=[]}function y(t,e,n){if(S[t])for(var r=S[t],o=0;o<r.length;o++)r[o](e,n)}function v(t,e,n){if("function"==typeof e){S[t]||(S[t]=[]);var r=S[t];if(!n)return void r.push(e);var o,i=[];for(o=r.length-1;o>=0;o--)r[o]===e&&i.push(o);for(o=i.length-1;o>=0;o--)r.splice(i[o],1)}}var g=[],p=0,m=!1,b=!1,w=!0,S={},A={},E=t.Element&&t.Element.prototype,N="[data-ry-video]:not(iframe)",I=",with,height,ignore,video,cover,";t.ResponsiveYoutube={start:l,destroy:d,on:function(t,e){v(t,e)},off:function(t,e){v(t,e,!0)}},E&&!E.matches&&(E.matches=E.matchesSelector||E.mozMatchesSelector||E.msMatchesSelector||E.oMatchesSelector||E.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e[n]!==this;);return n>-1})}(window,document);
