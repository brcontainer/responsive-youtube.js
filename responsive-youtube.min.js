/* Responsive-youtube.js 0.1.2 | Copyright (c) 2017 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(t,e,n){"use strict";function r(t){if(t&&e.body.contains(t)&&a(t,"ignore")!==!0){var n=a(t,"width")||t.clientWidth,r=a(t,"height")||t.clientHeight;t.setAttribute("data-ry-width",n),t.setAttribute("data-ry-height",r),t.width="100%",n!=r?t.height=t.clientWidth/(n/r):t.height=t.clientWidth}}function o(t,n,o){o&&"object"==typeof o||(o={}),s(w,o);var i=new YT.Player(t,{videoId:n,playerVars:o,events:{onReady:function(n){r(e.getElementById(t)),y("ready",n,i)},onStateChange:function(t){y("state",t,i)},onPlaybackQualityChange:function(t){y("quality",t,i)},onPlaybackRateChange:function(t){y("rate",t,i)},onError:function(t){y("error",t,i)},onApiChange:function(t){y("api",t,i)}}});v.push(i),y("create",i)}function i(t){for(var e=t.attributes,n={},r=e.length-1;r>=0;r--){var o=e[r].nodeName;0===o.indexOf("data-ry-")&&(o=o.substr(8),-1===A.indexOf(","+o+",")&&(n[o]=a(t,o)))}return n}function a(t,e){var n,r=t.getAttribute("data-ry-"+e);if("true"===r||"false"===r)return"true"===r;if(!isNaN(r))return parseFloat(r);if(/^\[[\s\S]+\]$|^\{[^:]+[:][\s\S]+\}$/.test(r))try{n=JSON.parse(r)}catch(o){}return n||r}function c(t){if(!b){for(var e=t.addedNodes,n=[],r=[],o=e.length-1;o>=0;o--)e[o].matches(E)?n.push(e[o]):r.push(e[o]);f(n),u(n)}}function u(t){for(var e=0,n=t.length;n>e;e++)f(t[e].querySelectorAll(E))}function f(t){for(var e=0,n=t.length;n>e;e++){var r=t[e];r.id||(r.id="responsive-youtube-"+ ++g),o(r.id,a(r,"video"),i(r))}}function s(t,e){for(var n in t)/^(object|function)$/i.test(typeof t[n])||(e[n]=t[n])}function h(){f(e.querySelectorAll(E)),p||(p=!0,t.addEventListener("resize",function(){if(v.length)for(var t=0,e=v.length;e>t;t++)r(v[t].getIframe())}),new N(function(t){t.forEach(c)}).observe(e.body,{childList:!0}),y("done"))}function d(n){if("object"==typeof n?s(n,w):w={},b=!1,t.YT&&t.YT.Player)return h();t.onYouTubeIframeAPIReady=h;var r=e.createElement("script");r.ansyc=!0,r.src="https://www.youtube.com/iframe_api";var o=e.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o)}function l(){b=!0,w={};for(var t=v.length-1;t>=0;t--)v[t].destroy();v=[]}function y(t,e,n){if(m[t])for(var r=m[t],o=0;o<r.length;o++)r[o](e,n)}var v=[],g=0,p=!1,b=!0,m={},w={},S=t.Element&&t.Element.prototype,E="[data-ry-video]:not(iframe)",A=",with,height,ignore,video,cover,",N=t.MutationObserver||t.WebKitMutationObserver;t.ResponsiveYoutube={start:d,destroy:l,supported:!!N,on:function(t,e){ryEvent(t,e)},off:function(t,e){ryEvent(t,e,!0)}},S&&!S.matches&&(S.matches=S.matchesSelector||S.mozMatchesSelector||S.msMatchesSelector||S.oMatchesSelector||S.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e[n]!==this;);return n>-1})}(window,document);
