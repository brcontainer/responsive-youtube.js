/* Responsive-youtube.js 0.1.3 | Copyright (c) 2017 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(t,e,n){"use strict";function r(t){if(t&&e.body.contains(t)&&a(t,"ignore")!==!0){var n=a(t,"width")||t.clientWidth,r=a(t,"height")||t.clientHeight;t.setAttribute("data-ry-width",n),t.setAttribute("data-ry-height",r),t.width="100%",n!=r?t.height=t.clientWidth/(n/r):t.height=t.clientWidth}}function o(t,n,o){o&&"object"==typeof o||(o={}),s(S,o);var i=new YT.Player(t,{videoId:n,playerVars:o,events:{onReady:function(n){r(e.getElementById(t)),y("ready",n,i)},onStateChange:function(t){y("state",t,i)},onPlaybackQualityChange:function(t){y("quality",t,i)},onPlaybackRateChange:function(t){y("rate",t,i)},onError:function(t){y("error",t,i)},onApiChange:function(t){y("api",t,i)}}});g.push(i),y("create",i)}function i(t){for(var e=t.attributes,n={},r=e.length-1;r>=0;r--){var o=e[r].nodeName;0===o.indexOf("data-ry-")&&(o=o.substr(8),-1===N.indexOf(","+o+",")&&(n[o]=a(t,o)))}return n}function a(t,e){var n,r=t.getAttribute("data-ry-"+e);if("true"===r||"false"===r)return"true"===r;if(!isNaN(r))return parseFloat(r);if(/^\[[\s\S]+\]$|^\{[^:]+[:][\s\S]+\}$/.test(r))try{n=JSON.parse(r)}catch(o){}return n||r}function c(t){if(!m){for(var e=t.addedNodes,n=[],r=[],o=e.length-1;o>=0;o--)e[o].matches(E)?n.push(e[o]):r.push(e[o]);f(n),u(n)}}function u(t){for(var e=0,n=t.length;n>e;e++)f(t[e].querySelectorAll(E))}function f(t){for(var e=0,n=t.length;n>e;e++){var r=t[e];r.id||(r.id="responsive-youtube-"+ ++p),o(r.id,a(r,"video"),i(r))}}function s(t,e){for(var n in t)/^(object|function)$/i.test(typeof t[n])||(e[n]=t[n])}function h(){f(e.querySelectorAll(E)),b||(b=!0,t.addEventListener("resize",function(){if(g.length)for(var t=0,e=g.length;e>t;t++)r(g[t].getIframe())}),new M(function(t){t.forEach(c)}).observe(e.body,{childList:!0}),y("done"))}function d(n){if("object"==typeof n?s(n,S):S={},m=!1,t.YT&&t.YT.Player)return h();t.onYouTubeIframeAPIReady=h;var r=e.createElement("script");r.ansyc=!0,r.src="https://www.youtube.com/iframe_api";var o=e.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o)}function l(){m=!0,S={};for(var t=g.length-1;t>=0;t--)g[t].destroy();g=[]}function y(t,e,n){if(w[t])for(var r=w[t],o=0;o<r.length;o++)r[o](e,n)}function v(t,e,n){return"function"==typeof e?(w[t]||(w[t]=[]),n?void(w[t]=w[t].filter(function(t){return t!==e})):void w[t].push(e)):void 0}var g=[],p=0,b=!1,m=!0,w={},S={},A=t.Element&&t.Element.prototype,E="[data-ry-video]:not(iframe)",N=",with,height,ignore,video,cover,",M=t.MutationObserver||t.WebKitMutationObserver;t.ResponsiveYoutube={start:d,destroy:l,supported:!!M,on:function(t,e){v(t,e)},off:function(t,e){v(t,e,!0)}},A&&!A.matches&&(A.matches=A.matchesSelector||A.mozMatchesSelector||A.msMatchesSelector||A.oMatchesSelector||A.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e[n]!==this;);return n>-1})}(window,document);
