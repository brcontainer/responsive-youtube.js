/* Responsive-youtube.js 0.2.0 | Copyright (c) 2020 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

(function(a){function b(a){if(!0!==a)r&&clearTimeout(r),r=setTimeout(b,300,!0);else if(t.length)for(var d=0,e=t.length;d<e;d++)c(t[d].getIframe())}function c(a){if(a&&w.body.contains(a)&&!0!==h(a,"ignore")){var b=h(a,"width")||a.clientWidth,c=h(a,"height")||a.clientHeight;a.setAttribute("data-ry-width",b),a.setAttribute("data-ry-height",c),a.width="100%",a.height=b==c?a.clientWidth:a.clientWidth/(b/c)}}function e(a){return a?b():void(clearTimeout(s),s=setTimeout(e,5e3,!0))}function f(a,b,d){d&&"object"==typeof d||(d={}),l(z,d);var f=new YT.Player(a,{videoId:b,playerVars:d,events:{onReady:function(b){c(w.getElementById(a)),p("ready",b,f)},onStateChange:function(a){p("state",a,f)},onPlaybackQualityChange:function(a){p("quality",a,f)},onPlaybackRateChange:function(a){p("rate",a,f)},onError:function(a){p("error",a,f)},onApiChange:function(a){p("api",a,f)}}});t.push(f),p("create",f),e()}function g(a){for(var b,c=a.attributes,d={},e=c.length-1;0<=e;e--)b=c[e].nodeName,0===b.indexOf("data-ry-")&&(b=b.substr(8),-1===",with,height,ignore,video,cover,".indexOf(","+b+",")&&(d[b]=h(a,b)));return d}function h(a,b){var c,d=a.getAttribute("data-ry-"+b);if("true"===d||"false"===d)return"true"===d;if(!isNaN(d))return parseFloat(d);var e=d[0],f=d[d.length-1];if("["===e&&"]"===f||"{"===e&&"}"===f)try{c=JSON.parse(d)}catch(a){}return c||d}function i(b){if(!x){for(var c,d=b.addedNodes,e=[],f=[],g=d.length-1;0<=g;g--)c=d[g],1===c.nodeType&&(c.matches("[data-ry-video]:not(iframe)")&&c.matches?e.push(c):f.push(c));c=a,k(e),j(f)}}function j(a){for(var b=0,c=a.length;b<c;b++)k(a[b].querySelectorAll("[data-ry-video]:not(iframe)"))}function k(a){for(var b,c=0,d=a.length;c<d;c++)b=a[c],b.id||(b.id="responsive-youtube-"+ ++u),f(b.id,h(b,"video"),g(b))}function l(a,b){for(var c in a)-1!==["object","function"].indexOf(typeof a[c])&&(b[c]=a[c])}function m(){if(k(w.querySelectorAll("[data-ry-video]:not(iframe)")),!v)return v=!0,A.addEventListener("resize",b),B?void(new B(function(a){a.forEach(i)}).observe(w.body,{childList:!0}),p("done")):p("error")}function n(a){if("object"==typeof a?l(a,z):z={},!!x){if(x=!1,A.YT&&A.YT.Player)return m();A.onYouTubeIframeAPIReady=m;var b=w.createElement("script");b.ansyc=!0,b.src="https://www.youtube.com/iframe_api";var c=w.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}}function o(){x=!0,z={};for(var a=t.length-1;0<=a;a--)t[a].destroy();t=[]}function p(a,b,c){if(y[a])for(var d=y[a],e=0;e<d.length;e++)d[e](b,c)}function q(a,b,c){if("function"==typeof b)return y[a]||(y[a]=[]),c?void(y[a]=y[a].filter(function(a){return a!==b})):void y[a].push(b)}var r,s,t=[],u=0,v=!1,x=!0,y={},z={},A="undefined"==typeof window?{}:window,w=A.document?A.document:{},d=A.Element&&A.Element.prototype,B=A.MutationObserver||A.WebKitMutationObserver;d&&!d.matches&&(d.matches=d.matchesSelector||d.mozMatchesSelector||d.msMatchesSelector||d.oMatchesSelector||d.webkitMatchesSelector||function(a){for(var b=(this.document||this.ownerDocument).querySelectorAll(a),c=b.length;0<=--c&&b[c]!==this;);return-1<c}),A.ResponsiveYoutube={start:n,destroy:o,supported:!!B,on:function(a,b){q(a,b)},off:function(a,b){q(a,b,!0)}}})();
