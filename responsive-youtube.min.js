/* Responsive-youtube.js 0.1.6 | Copyright (c) 2019 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(r,o,a){"use strict";var i,t,c=[],u=0,e=!1,f=!0,s={},h={},n=r.Element&&r.Element.prototype,l="[data-ry-video]:not(iframe)",d=",with,height,ignore,video,cover,",y=r.MutationObserver||r.WebKitMutationObserver;function v(e){if(!0!==e)i&&clearTimeout(i),i=setTimeout(v,300,!0);else if(c.length)for(var t=0,n=c.length;t<n;t++)g(c[t].getIframe())}function g(e){if(e&&o.body.contains(e)&&!0!==w(e,"ignore")){var t=w(e,"width")||e.clientWidth,n=w(e,"height")||e.clientHeight;e.setAttribute("data-ry-width",t),e.setAttribute("data-ry-height",n),e.width="100%",e.height=t!=n?e.clientWidth/(t/n):e.clientWidth}}function m(e){if(e)return v();clearTimeout(t),t=setTimeout(m,5e3,!0)}function p(t,e,n){n&&"object"==typeof n||(n={}),A(h,n);var r=new YT.Player(t,{videoId:e,playerVars:n,events:{onReady:function(e){g(o.getElementById(t)),N("ready",e,r)},onStateChange:function(e){N("state",e,r)},onPlaybackQualityChange:function(e){N("quality",e,r)},onPlaybackRateChange:function(e){N("rate",e,r)},onError:function(e){N("error",e,r)},onApiChange:function(e){N("api",e,r)}}});c.push(r),N("create",r),m()}function b(e){for(var t=e.attributes,n={},r=t.length-1;0<=r;r--){var o=t[r].nodeName;0===o.indexOf("data-ry-")&&(o=o.substr(8),-1===d.indexOf(","+o+",")&&(n[o]=w(e,o)))}return n}function w(e,t){var n,r=e.getAttribute("data-ry-"+t);if("true"===r||"false"===r)return"true"===r;if(!isNaN(r))return parseFloat(r);var o=r[0],i=r[r.length-1];if("["===o&&"]"===i||"{"===o&&"}"===i)try{n=JSON.parse(r)}catch(e){}return n||r}function S(e){if(!f){for(var t,n=e.addedNodes,r=[],o=[],i=n.length-1;0<=i;i--)1===(t=n[i]).nodeType&&(t.matches(l)&&t.matches?r.push(t):o.push(t));t=a,T(r),function(e){for(var t=0,n=e.length;t<n;t++)T(e[t].querySelectorAll(l))}(o)}}function T(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];r.id||(r.id="responsive-youtube-"+ ++u),p(r.id,w(r,"video"),b(r))}}function A(e,t){for(var n in e)-1!==["object","function"].indexOf(typeof e[n])&&(t[n]=e[n])}function E(){if(T(o.querySelectorAll(l)),!e){if(e=!0,r.addEventListener("resize",v),!y)return N("error");new y(function(e){e.forEach(S)}).observe(o.body,{childList:!0}),N("done")}}function N(e,t,n){if(s[e])for(var r=s[e],o=0;o<r.length;o++)r[o](t,n)}function M(e,t,n){"function"==typeof t&&(s[e]||(s[e]=[]),n?s[e]=s[e].filter(function(e){return e!==t}):s[e].push(t))}r.ResponsiveYoutube={start:function(e){if("object"==typeof e?A(e,h):h={},f){if(f=!1,r.YT&&r.YT.Player)return E();r.onYouTubeIframeAPIReady=E;var t=o.createElement("script");t.ansyc=!0,t.src="https://www.youtube.com/iframe_api";var n=o.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}},destroy:function(){f=!0,h={};for(var e=c.length-1;0<=e;e--)c[e].destroy();c=[]},supported:!!y,on:function(e,t){M(e,t)},off:function(e,t){M(e,t,!0)}},n&&!n.matches&&(n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;0<=--n&&t[n]!==this;);return-1<n})}(window,document);